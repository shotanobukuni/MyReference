# AWS環境構築準備

## VPC
***
1. VPCのIPアドレスを設定する

設定するのは  
* VPCのIPアドレス
* VPC内のサブネットIPアドレス

基本的にプライベートIPアドレスから選定する  
プライベートIPアドレスは下記の通り

|  プライベートIPアドレス  |
| ---- |
|  10.0.0.0〜10.255.255.255  |
|  172.16.0.0〜172.31.255.255  |
|  192.168.0.0〜192.168.255.255  |
***
2. サブネットを設定する

1で作成したVPCに内包するIPアドレスをサブネットに割り当てる  
基本的には
Webサーバー : パブリックサブネット(公開)  
DBサーバー  : プライベートサブネット(非公開)  
といった感じで用途に応じてサブネットを分ける
***
3. インターネットゲートウェイをルートテーブルに追加  
VPCが10.0.0.0/16の場合、ルートテーブルは
```
10.0.0.0/16 local
```
となっている  
つまり10.0.0.0/16以外の通信は破棄される
ここでインターネットゲートウェイ(0.0.0.0/0)をVPCにアタッチすることで、  
VPCが外部ネットワークとつながるようになる  
やることとしては、AWSのインターネットゲートウェイ画面で、インターネットゲートウェイ(0.0.0.0/16)を新規作成し、1で作ったVPCにアタッチする  
***
4. ルートテーブル設定  
ルートテーブル画面にある1で作成したVPCの中身を確認する  
するとlocalのルーティングしかないことがわかる  
ルートテーブル作成から、1で作成したVPCに対してルートテーブルを作成する
***
5. ルートテーブルとサブネットを紐づける
ルートテーブル画面のサブネット紐づけから2で作成したサブネットを紐づける
***
6. ルートテーブルとインターネットゲートウェイを紐づける  
ルートテーブルのルートの編集画面からインターネットゲートウェイ(0.0.0.0/0)を追加する
